function [y1,xf1] = nn_d10_n32(x1,xi1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 02-May-2019 01:03:16.
%
% [y1,xf1] = myNeuralNetworkFunction(x1,xi1) takes these arguments:
%   x1 = 2xTS matrix, input #1
%   xi1 = 2x10 matrix, initial 10 delay states for input #1.
% and returns:
%   y1 = 1xTS matrix, output #1
%   xf1 = 2x10 matrix, final 10 delay states for input #1.
% where TS is the number of timesteps.

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [588;52];
x1_step1.gain = [0.000550206327372765;0.0045662100456621];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.6959838724323290648;-6.1603594054418069348;3.7403139763493955527;2.4751854098556851369;-6.8915972871708683911;-3.3244665547964178387;-2.5234940889081087789;-2.5544262690117514047;0.65925524449531802684;4.2583590858910698174;-5.0949135485342491592;14.22512569445461672;-5.4017225954429015644;0.70857634090565824181;-3.7794352445964931597;-3.6439178204152087304;3.3818606826484645111;1.0886204314169436458;2.6321981878588256443;-3.58927799553302318;3.1280608537524541291;-3.459647767051991174;-13.451688642744580093;2.1666747619293369453;-0.34568609202761341193;6.7389641033463210107;2.0064029302355330664;-1.0438348380191695419;3.7215277041311147777;6.0727301492744842903;5.5524035725218041648;5.8765561946299413876];
IW1_1 = [-2.0675441521605146811 0.8842255824255087493 -1.078632528387707179 -0.155488885493028417 -0.78346627441883831544 -0.29190191687411437549 -0.8175852156624408007 0.23312986603867247304 0.30672353393370116459 0.12092887608049261716 -0.061874526257226183934 0.94245241643223343075 -0.15913202040643015245 -0.33073471093131434628 0.71102076959864723982 0.60827440344435768083 -0.11268652698332094764 0.13334887333930850462 -1.0037205955191881301 -0.0019119060998968248621;1.0611506055248440816 -9.0881747905768008877 2.9788184066648959458 -4.2828386791110633069 0.55894921030880795332 -0.82194157867727002387 -2.6932316335159667275 0.36771243333297176648 -3.1438573082007557069 2.3603954661767070355 -2.5096298865518793519 -0.047930374847370615932 2.1814995520004236695 0.46423855056012680587 1.8751531053946852712 2.4582533345081372111 -0.15937503904298258584 1.0151599000906579295 -0.17777081331103242179 -0.36672375021407549456;0.70697031735129856056 2.5267788946275007156 -0.21480351381330359262 1.1982173994606584166 0.24860753964118481596 0.099697355493915271185 0.33508693341974810087 0.47992663567032617378 0.33436976436637583232 1.1462139739974370745 0.57418993209356228302 -0.34273852912942365245 0.50975209656398112745 0.4825016382438693241 0.22825653039524376742 -0.34440917427061590317 0.77976047238515922011 -0.20311766308877407528 2.4849227227588008837 -1.4501349209913529936;-3.1870052921106477584 2.4294558868349849234 -1.0918096860690162941 -0.43576352658117289973 0.41388582062225531821 -0.2786925456718823968 -0.17804333695801830006 -0.70951386438049790506 0.66936378661612472296 -0.59676001905625986055 0.4233345797649272213 1.0444066307904873447 -0.42829072820361235863 2.1846249936148085524 0.51633900429736967475 0.77095214097462572145 0.54996610471707496615 0.34690128343656612131 0.48525517930910888609 -2.4653407327186527276;2.4707538684978702648 -1.289172416931809062 1.7508834143155340701 -0.88639446308801672636 1.965777734952875333 0.16671878271137563488 1.7523958534265879905 -0.20628968603707395491 1.1354493349248304668 0.7188628767031500777 0.94881963497945098762 0.69170394953565739193 0.56801390547021646249 0.38994999905252381023 0.59959797331915165586 1.4540160130940327221 0.63631866583268381632 2.6540463864224386192 1.4021930748495963215 3.1584282551299702746;-0.13119232474149475354 -1.1555293708545286702 0.60599612618490550364 -0.31787609552578366401 0.99643997641347903382 -0.90138215277443878293 0.49447175875024890201 0.43972328869744481405 0.27978954698317892724 -0.041257376746450434568 0.87081410115446522546 1.1908486608273447516 0.54344507332625258123 0.3745483310426820367 1.286577350176242529 0.88058514763072603948 0.86040839913138378314 0.62073326471036793794 0.20686709696429320116 1.7666055546337557924;0.84109978695536768978 1.08520485464445815 0.80584284560894714478 0.93713620988451518112 0.16372014323989980689 1.1624115380617328075 1.1303937658539078281 0.11227514750694513046 0.82280759211873844006 0.84344610627765903565 1.2720799159560101099 -0.27912334386963116861 0.95106234778145604114 0.54098985247684727717 0.91026585659075887058 0.9570914210840228975 1.1301293410383324023 0.48103333929062502827 0.56294971911372837514 1.3189855792959088721;-0.33140806655086391119 -6.2339729759901754136 1.3552123645814133646 -4.6904442368156322729 1.4366594113150965573 -3.7012065332988086652 0.24739611998368166157 -2.2223727886516231322 0.90399262610893116321 0.23999073483918509364 0.28744870871760336284 1.8505823940299983565 0.7820810067606278615 1.816579255577399854 -0.92229886788263903963 2.6895382868779242891 -0.89472382045045473209 2.7048381246012174195 -1.2524753491259486005 3.5364763796677527452;-0.51709045225707117588 -0.064155956687124787718 2.1535794064435442863 -0.68959648512451587887 0.015116845201057851206 -1.1293916434384501102 -0.18376966211479570101 -0.32778529095199920862 0.25611820929895368071 0.023158610830981123802 0.48984182995805997107 0.23145622218624303801 -0.012060363224768609267 -0.97982125957586063691 -0.92055656916075034868 -0.17805841654358292581 -0.87517978671134055713 0.94308440784231784004 -1.9430399106538698284 3.1997062010103181073;-7.3599798581384252572 3.4757750628322856556 -1.6277355568583331547 1.4024232915885943562 -2.0600052251485978516 0.2973965753948993318 -0.20907719341284303205 -0.42569750416199386711 1.1377589009512265594 0.26803745137995671488 2.1751387624113518449 1.8307623032478599345 1.7478172107126208612 -0.10354995480130743668 3.2274567182186886249 0.27340102262128185284 1.7729978417803295976 -0.91476887674325702005 0.79457182413071236748 -1.0118384258654555818;10.426631472665238931 -8.7240862731286856757 -0.12264433940144528479 0.35872931771350863306 -2.0839404318459919807 1.6835816188389560732 -2.3229752325519972267 2.5392934808119065337 -1.7959304356038561234 -0.77870519440100904873 0.15191530769042857485 -1.0146622778836873469 -0.3495671076362003582 -0.90380386064868667439 -0.12199002346343133796 -0.13164927910829829494 0.087131028977376012712 0.76759916808763295482 -1.9732064478002364627 -0.47032722761257977906;-19.773766783225333654 18.821645833338365605 -10.908380913285196101 8.058669692441974064 -6.5936640338076353274 4.6153299034879093909 -1.745077574023995437 1.2943904312543563773 3.7457576859398176161 0.12136275378725085161 5.3297922483524695636 -0.36292866899051856588 8.9558404279381687019 -2.2936910154641916293 6.0303575754867466685 -2.6162600091370049604 6.2277436776931640594 -3.2978892856774923992 7.3458147106593303377 -7.7247339467696507498;1.3533559559481032064 -7.2018795662506791544 1.1605244326363863827 -1.7583487143082621174 1.0951179562516064614 -0.88267384013672967047 -0.19695602394677355629 1.498519874887612735 -0.92449983511775624123 2.556044778213583335 -0.40327081427703315164 0.97850917538336323886 -0.21110144225033070087 0.81321733704619070249 1.3425491635212911667 -0.92062739847956609474 1.57073391294073339 -0.38925818197893491401 0.80227240791517040464 -0.64466174328825198714;0.42692608169052809197 0.064733771364312464591 0.056115833400004186404 -0.69498130788559409066 0.45557637897085656586 -1.1334608411590945121 0.047465755514659674352 0.084856250071720970563 0.1706592123698594532 -0.078866790421080704143 0.33914073075975581517 -0.17773061926552505274 0.3103075763112040919 -0.4071556875422294719 -0.75422318535315424626 -0.28510529382578470026 -0.96477219760325849673 1.1225901592514733185 -1.3954765338217667292 2.8334889296245253654;10.642797072045402373 -3.0341244076631324056 -4.0077163767184833532 1.6951777040720064083 0.23141998231602284308 1.3483297744317823685 -0.27294845921388138921 0.2332194150553174028 -0.42441112905257899479 -0.44792517483800931011 -2.8678829635447820046 -0.8965259445284055051 0.028689931888300962415 -1.9146775128505142405 -0.14633700844867467139 0.89983424133436129555 -0.84814342390280550443 -1.8154999124464574756 0.66571063885793102521 0.8670304248558642346;0.62018038052201285293 -3.6597028491472451961 1.2862427865694721074 -2.4674899638158369619 0.39618266102042759558 -0.37469954737105165554 -0.14233432505849333283 0.97010762448676257641 -0.041361749423263545478 2.1649797261404426507 0.072114528107377090516 0.59133523658217501673 -0.56435749219717745717 0.31059142847511495011 0.23323341167032179966 -0.53574193598293240459 0.5622234502608971507 -0.40450940420128567165 1.5215705982930685103 -0.26365938251578691087;-12.643379988542484682 12.239391461581472953 -4.7766861960687618804 5.6390525299659861602 -4.9581657379599954893 4.8562015203568558164 -1.3373161567613478518 1.6198979225169620744 1.9955379452591228695 -0.30669052599234292167 3.549941140380597826 -1.0585678673858591736 4.7686310242218672428 -3.1045886110852864981 4.3039633768911862433 -3.9859624469363050814 4.9046194828027616097 -4.5441467049147350465 4.6748208025785924491 -6.7332086084440936347;0.2419587698308471313 0.10918797749419227594 0.39941872276084616766 0.81643340198265856866 -0.43202705305753996701 0.12449942545201495014 0.40069443987359792958 -0.28276294360602299838 0.67960821286381567496 -0.61722191558242212039 0.43070622742355307855 -0.1916974528117598997 -0.5659497212344010153 -0.032902040296323500912 -0.80774145269721187024 0.4344037125627198126 0.19339498290536566438 0.331715462275884998 0.086387702682633946139 1.0868285199576774858;-0.35359191301995113177 3.5353421719015654112 -2.0677099782768575409 1.8951164358051957315 -1.4460279991632669638 -0.64336059843016946136 0.21872130091648070427 -2.0776406239822549082 1.1833746186563056657 -0.59913840315277122617 0.47462028614315682207 0.45752753326892725561 -1.3727923147047189634 -0.084995207005530148958 0.04584918701869186014 0.68748450533857397016 -0.1012020801363375383 0.57351848718633979818 1.2997534863474151656 -0.69789349677554790574;13.222102346454558841 -11.704100585592250638 8.4197580050501894533 -7.2342792959345842974 7.3013780838516648686 -5.7961054082954381883 3.7949191349616882007 -1.6283039205530478455 -1.6047025881742937869 0.038040472834696498206 -3.5548787473589169572 1.17138413487576587 -6.1698083645727317403 3.4708086657915719897 -7.1438565497584667341 3.3407405833888943469 -6.4688769877249745477 4.7133396444123336622 -8.8864550218808897597 9.8986901946004692832;-0.80092358494473758768 2.5807760692664749591 -2.3115002261914381343 2.5273433697409406484 -1.5081930899736051277 0.39593267576837859467 0.045532676306663993904 0.14505030240930641416 0.66107218696896463683 -0.055979044929866897395 0.83084101992694991967 -0.41632880723995008276 1.193903276052367568 -0.58309716724698024137 0.46415113725487294749 -0.74919999385282376458 -0.39495231233713873342 0.41750132667365513761 0.077832288742988878227 0.45897131030798260509;13.175521714341527968 -11.522413437874670095 7.3073994463154443579 -6.6704728211032433549 5.9528639474458957537 -5.4967825660923024245 2.894406291081381255 -1.7153686111428667616 -1.9940181513173793615 0.078157923686531807772 -3.5059369141522753743 1.0939252224576565542 -5.8847686970488179981 3.4035729533396512636 -6.2879911222048008312 3.6103066795122953359 -5.6014735350104318812 4.6279428003268376912 -6.8572326802379954813 8.562002163317247394;17.920385694480280847 -18.452135690671852331 8.7302575094785979104 -7.6546495259252971266 5.5220012637860600435 -4.3747290936386828974 0.98442604581206338832 -0.85682024685698143784 -3.4687638201484478628 0.28523819096571728648 -5.0414729400857591912 0.66648447524575227252 -7.0494927583547104533 2.1377351814447980161 -4.3418368689154203111 2.6201297125190818882 -5.3049188060221021956 3.1579159400674163827 -6.8221018806423749936 6.5465067059450614551;-1.2806343503985526677 3.7214629984822895636 -4.3749082802373235879 0.56463248791206877009 -1.6894425355230227037 -0.99062940062565318922 1.0102773393220612075 -0.88359644341656695676 -0.12291638834511205147 -0.25876715696924385002 0.89550517706826682218 -0.19389751461119333897 1.2801046764390611177 0.057511304446893188325 1.28560931150392177 1.3248470583948503965 -0.43656790209194268337 -0.040052771855772370535 1.5251957657008430314 -1.7733098446972037632;-0.40326002636803981449 -0.91020199415538649568 -0.44348838759720660141 -0.70425875360262579772 -0.81921170869521908742 0.13124732392075083576 -0.52838428201385767569 0.023731533547605390688 -0.082012432103041710274 -0.33280827223228492961 -0.45339591480201746343 -0.44447495687981097845 0.48587605541968004186 0.19059436684684055718 0.19345596683967350438 -0.067422159325593422619 -0.23589221374382077223 0.56305719770227391496 0.70332803012076117177 -0.39191374345388330092;-16.144369000043464979 12.092643030104166968 -0.46002360457588881149 -1.746961086244952277 4.4691417428464621509 -2.2304566634494507049 3.4103067945145322248 -2.2718335281824661998 2.0438336567648818232 0.9203547619235518118 -0.42059168874677688166 0.7766779288484786381 2.8981835803175317601 2.0815391471343627217 0.15757077845668540639 0.096653535867252698965 -0.92971152445108207196 -1.3197723895496671354 2.3772069645311941777 0.14851689024318262544;1.2085436294939362334 -0.019961901217803234426 -0.49829062286903114121 0.11374929729283997371 -0.72343428087213801359 0.86202143250266272112 0.16118920637806241625 0.85486629490893273342 -0.74866210327074678155 -0.14761025553058565452 -0.092444019509276789681 -0.74116201597406028423 -0.40672941253231204017 0.25468441896279586656 0.30175559531299261939 -0.72036211839766095544 -0.044140693966753775934 -0.47500397822675327619 1.0847667501261106793 -0.10118134102652941164;-1.253073898160136368 0.035536903956941756633 2.0153566371113300626 -0.54583700535492518657 -0.072004430873186683892 0.081907229652043944679 -0.14553481582383576143 -0.044419267942020092266 -0.72935048392323487132 0.8460999848650512245 -0.38876101838729315574 0.67758053417098795812 0.20810583226721315886 -0.4893410439461870487 0.68692057968368069876 -0.28110237297458107175 0.30124089589664765354 -1.0951747136455700637 -0.80279579082441765436 -1.1850332647516448326;-0.27525962140942095147 1.9253571910999562888 0.74458547452503298647 1.8418983280282810178 0.18218387002170607913 0.060537533075131211291 0.66988814988402323181 0.16887430664991065488 0.84090101413093965022 1.3468924270778470653 0.58527633827321123849 0.13238100662005605757 0.8304231410890520193 -0.30994555998164524668 0.48611913780494403481 -0.22086460766874563277 1.0345954020504135595 -0.53896635455570096607 0.71615889419693179452 -0.64886818825299319435;-5.1121056754980207515 4.6878796298843754542 0.12749034845289267115 -1.7132490101760520229 0.98782016343212331044 -1.0138243474175137049 0.045250920129429370031 -0.41317151191241036079 1.024565762482477993 0.79316910570506260481 0.68797076903686726901 1.8446072232713450756 -0.1977902630882781565 -0.066270562184870457356 -0.25470468663208356563 -0.38576714170274661875 -0.24511476106537355424 0.57499634699596691156 -0.63199450327159267804 2.0443604349265034337;-3.1908335235100149241 6.116808060372001421 -3.8086488858950207081 3.3843213311820732336 -2.2760851432449662468 0.39266527196397538191 1.0901749516036767229 -0.47149606808281796511 2.5320727465479428986 -1.3799374766196652597 2.219759878557140631 0.4829273454108837238 0.23044307215143886025 0.59323498985978662112 0.96547922901521099348 -0.66389015589529865036 0.64705461491948257358 -0.73330234391871762512 1.5275516881683974812 -0.9725752874062507658;2.4856557574992681481 3.4226913724861165456 -2.7810759081096829703 -0.68756750148404932599 0.4839075408115452448 -0.65386115035102709836 -0.55565802258737251318 0.22735133529444789824 -0.2683808688136819498 -0.13575158383266602846 -1.6304054303551696048 0.77893065957575624569 -0.11190560592228651626 0.12934332184605398797 -0.86544981823475719551 0.037221513873823511287 -0.25974744348134587435 0.063714721683166802846 0.12009528974772697152 2.3313847390851227814];

% Layer 2
b2 = -0.25487447935952473044;
LW2_1 = [-3.8113116120714289892 -3.2726775221873607435 0.95510149424995327561 -1.8675922042984747229 2.5993098905483380534 -4.6237693687941252563 0.5396150278580720272 -0.082032479548260817115 -2.1452292143145466063 4.8596830022372863311 7.6896944111945169098 7.3615763569355934237 -2.3282723251857455615 2.5242160519985872291 -4.3438475977730410804 4.4511112491357875953 -5.2020186450224459307 1.6527392377088996334 4.9682016427192783325 7.7941223683877636219 -1.2251119873044276076 -12.971935068378684264 8.0161968131209295763 -2.288308191046072082 0.29044415304314452619 5.7191326566657325614 -1.3928162288186951567 1.6453248061931911028 -1.0123740025205121285 -6.4098630226919910413 -5.4211717915685744273 7.1645708063415964872];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 2;
y1_step1.xoffset = 0;

% ===== SIMULATION ========

% Dimensions
TS = size(x1,2); % timesteps

% Input 1 Delay States
xd1 = mapminmax_apply(xi1,x1_step1);
xd1 = [xd1 zeros(2,1)];

% Allocate Outputs
y1 = zeros(1,TS);

% Time loop
for ts=1:TS
    
    % Rotating delay state position
    xdts = mod(ts+9,11)+1;
    
    % Input 1
    xd1(:,xdts) = mapminmax_apply(x1(:,ts),x1_step1);
    
    % Layer 1
    tapdelay1 = reshape(xd1(:,mod(xdts-[1 2 3 4 5 6 7 8 9 10]-1,11)+1),20,1);
    a1 = tansig_apply(b1 + IW1_1*tapdelay1);
    
    % Layer 2
    a2 = b2 + LW2_1*a1;
    
    % Output 1
    y1(:,ts) = mapminmax_reverse(a2,y1_step1);
end

% Final delay states
finalxts = TS+(1: 10);
xits = finalxts(finalxts<=10);
xts = finalxts(finalxts>10)-10;
xf1 = [xi1(:,xits) x1(:,xts)];
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
